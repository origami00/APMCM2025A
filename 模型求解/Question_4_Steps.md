# 小问 4 求解步骤：多目标优化 (NSGA-II)

## 1. 数据输入
*   **导入模型**：加载小问 4 定义的能耗积分模型 $E_{total}(\omega, T)$。
*   **导入数据**：电机参数（$R, K_t, k_{loss}$），小问 1-3 的基础轨迹数据。

## 2. 参数初始化 (NSGA-II 配置)
*   **种群规模**：50 - 100 (多目标通常不需要太大种群)。
*   **最大代数**：200。
*   **决策变量界限**：
    *   $\omega_1 \in [0, 5]$
    *   $T_2 \in [4, 6]$
    *   $\omega_3 \in [0, 10]$
*   **目标方向**：均为最小化 (Minimize)。

## 3. 模型调用 (多目标寻优)
*   **步骤 3.1：初始评估**
    *   生成初始种群，计算每个个体的 $(E_{total}, T_{max})$。
*   **步骤 3.2：非支配排序**
    *   对比所有个体，找出互不支配的个体集合（Pareto Front Rank 1）。
    *   剔除 Rank 1，在剩余个体中找 Rank 2，依此类推。
*   **步骤 3.3：拥挤度计算与选择**
    *   在同 Rank 内，计算个体在目标空间中的密度。
    *   优先选择 Rank 小、拥挤距离大（分布稀疏）的个体进入下一代。
*   **步骤 3.4：交叉变异**
    *   模拟二进制交叉 (SBX) 和多项式变异 (Polynomial Mutation)。
    *   *注意*：变异分布指数 $\eta$ 影响局部搜索能力，推荐设为 20。

## 4. 结果输出
*   **Pareto 前沿图**：
    *   绘制散点图：X轴-时间，Y轴-能耗。
    *   *注意*：检查前沿是否光滑连续，若断裂则可能陷入局部最优或种群太小。
*   **最优解推荐**：
    *   计算“膝点” (Knee Point)：距离理想点 (0,0) 最近的解，或切线斜率突变处。
    *   输出该点的决策变量值 $[\omega_1^*, T_2^*, \omega_3^*]$ 及其对应的能耗与时间。
*   **对比分析**：输出优化后能耗相比初始方案的下降百分比（如“能耗降低 15%，时间仅增加 0.5s”）。

