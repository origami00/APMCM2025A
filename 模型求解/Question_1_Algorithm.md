# 小问 1 求解算法：空间直角坐标系转换

针对小问 1 建立的 **空间直角坐标系转换模型** 及 **电机扭矩安全验证模型**，该问题本质上属于机器人学中的 **正运动学 (Forward Kinematics)** 问题，即已知关节角度求末端位姿。考虑到模型结构相对简单（开链结构、自由度少），推荐以下两种求解方法。

---

## 1. 算法一：解析法 (Analytical Method) / 直接代数法

### 1.1 原理概述
解析法是基于几何关系或代数方程，直接推导出末端执行器位置坐标与关节变量之间的显式函数关系。对于简单的机械臂结构，可以通过三角函数投影或向量代数直接写出闭式解（Closed-form Solution）。

### 1.2 适用场景
*   **低自由度机构**：自由度（DOF）较少（如本题仅涉及伸展和旋转两个动作），几何关系直观。
*   **实时性要求高**：解析解计算量极小，适合嵌入式底层控制。
*   **精度要求高**：不存在数值迭代误差，精度仅受限于浮点数表示精度。

### 1.3 优缺点分析
*   **优点**：
    *   **计算速度极快**：仅需几次三角函数运算。
    *   **无收敛问题**：不需要迭代，不存在不收敛的情况。
    *   **逻辑清晰**：物理意义明确，易于调试和验证。
*   **缺点**：
    *   **通用性差**：模型结构一旦改变（如增加关节、改变轴向），公式需重新推导。
    *   **复杂系统难以推导**：对于6自由度以上的串联或并联机器人，解析解推导极其繁琐甚至无解。

### 1.4 在本题中的应用
在本题中，依据建立的模型公式：
$$
\begin{bmatrix} x \\ y \\ z \end{bmatrix} = L_{arm} \cdot \begin{bmatrix} \cos\theta_{ext} \cos\theta_{rot} \\ \cos\theta_{ext} \sin\theta_{rot} \\ \sin\theta_{ext} \end{bmatrix}
$$
直接将 $\theta_{ext}=60^\circ, \theta_{rot}=30^\circ, L_{arm}=338$ 代入公式计算即可得到精确坐标。

---

## 2. 算法二：齐次变换矩阵法 (Homogeneous Transformation Matrix, HTM)

### 2.1 原理概述
这是机器人学中最通用的标准方法（如 D-H 参数法）。通过建立每个连杆坐标系之间的 $4 \times 4$ 齐次变换矩阵，将局部坐标系的点变换到基坐标系。
总变换矩阵 $T$ 为各关节变换矩阵的连乘：
$$ T_{total} = T_{shoulder\_pitch} \cdot T_{shoulder\_yaw} \cdot T_{arm} $$
末端坐标即为 $T_{total} \cdot [0, 0, 0, 1]^T$。

### 2.2 适用场景
*   **多自由度串联机器人**：适合处理复杂的关节连接关系。
*   **通用仿真平台**：Matlab Robotics Toolbox、ROS 等软件底层均采用此方法。
*   **需要姿态信息**：不仅需要位置 $(x,y,z)$，还需要末端姿态（旋转矩阵）的情况。

### 2.3 优缺点分析
*   **优点**：
    *   **通用性强**：适用于任意构型的串联机器人，建模标准化。
    *   **易于编程实现**：矩阵乘法适合计算机处理。
    *   **扩展性好**：若后续增加肘关节或手腕关节，只需增加对应的矩阵相乘即可。
*   **缺点**：
    *   **计算冗余**：对于仅有2个自由度的简单问题，引入 $4 \times 4$ 矩阵运算包含大量 0 和 1 的无效计算。
    *   **直观性稍弱**：相比几何投影，矩阵连乘的中间过程物理意义不直观。

### 2.4 在本题中的应用
构造旋转矩阵：
1.  绕 Y 轴旋转（伸展 Pitch）：$Rot_y(-\theta_{ext})$ （注意坐标系定义方向）
2.  绕 Z 轴旋转（偏航 Yaw）：$Rot_z(\theta_{rot})$
通过矩阵乘法得到结果。虽然本题可以解决，但在仅有两个关节且轴线正交的情况下，略显“杀鸡用牛刀”。

---

## 3. 推荐求解方法

### **推荐算法：解析法 (直接代数法)**

**推荐理由**：
1.  **模型极简**：题目仅涉及单臂的两个正交旋转运动，几何关系一目了然，解析公式非常简洁。
2.  **完全满足需求**：题目只要求求解末端坐标和验证力矩，解析法能以最高的效率给出精确解。
3.  **无需额外库**：不需要依赖矩阵运算库，在 Excel、简单 Python 脚本或计算器中均可直接完成。
4.  **易于解释**：比赛论文中写出解析公式比列出矩阵更能直接展示对几何关系的理解。

**求解步骤总结**：
1.  定义 $L_{arm}=338, \theta_{ext}=60^\circ, \theta_{rot}=30^\circ$。
2.  代入解析公式计算 $x, y, z$。
3.  计算力臂 $d_{horiz}$ 和力矩 $T_{gravity}$。
4.  与 $T_{limit}$ 比较输出安全结论。

